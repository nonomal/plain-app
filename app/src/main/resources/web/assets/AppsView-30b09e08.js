import{b as E,u as H,_ as J,a as O}from"./list-5e8cf700.js";import{_ as W}from"./FieldId-d1ec1c14.js";import{o as r,c as p,b as e,d as X,p as Y,r as d,u as ee,s as te,a as se,A as oe,n as ae,B as ne,Z as le,i as ie,t as re,$ as ce,G as ue,e as f,v as de,f as o,J as pe,K as _e,L as me,w as q,F as B,y as he,x as ve,j as fe,g as l,l as $e,O as D,P as Q,k as x,Q as ye,z as $,R as y}from"./index-79f9263f.js";import{_ as be}from"./Breadcrumb-754c867d.js";import{n as qe}from"./list-6498ebd9.js";import{c as ge,b as z}from"./search-52423e6c.js";import{u as ke}from"./files-ded7ae0f.js";import"./VModal.vuevuetypescriptsetuptruelang-3158168b.js";import"./baseIndexOf-70b929c6.js";import"./toInteger-d7cff406.js";const we={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Te=e("path",{fill:"currentColor",d:"M12 15.575q-.2 0-.375-.062T11.3 15.3l-3.6-3.6q-.275-.275-.275-.7t.275-.7q.275-.275.713-.287t.712.262L11 12.15V5q0-.425.288-.713T12 4q.425 0 .713.288T13 5v7.15l1.875-1.875q.275-.275.713-.263t.712.288q.275.275.275.7t-.275.7l-3.6 3.6q-.15.15-.325.213t-.375.062ZM6 20q-.825 0-1.413-.588T4 18v-2q0-.425.288-.713T5 15q.425 0 .713.288T6 16v2h12v-2q0-.425.288-.713T19 15q.425 0 .713.288T20 16v2q0 .825-.588 1.413T18 20H6Z"},null,-1),Ve=[Te];function Ce(K,c){return r(),p("svg",we,Ve)}const Se={name:"material-symbols-download-rounded",render:Ce},Ae={class:"v-toolbar"},Be={class:"right-actions"},De={class:"row mb-3"},Qe={class:"col-md-3 col-form-label"},xe={class:"col-md-9"},ze=["onKeyup"],Ke={class:"actions"},Le=["onClick"],Me={class:"table"},Fe=["onClick"],Ne=e("br",null,null,-1),Ge={class:"nowrap"},Ie=["title"],Re=["title"],Ue={key:0},Ze={colspan:"6"},Pe={class:"no-data-placeholder"},st=X({__name:"AppsView",setup(K){var S,A;const c=Y(),u=d([]),{t:g}=ee(),{app:L}=te(se()),_=oe({text:"",tags:[]}),{download:M}=ke(L),k=ae(),w=k.query,m=d(parseInt(((S=w.page)==null?void 0:S.toString())??"1")),h=50,v=d(0),n=d(ne(((A=w.q)==null?void 0:A.toString())??"")),T=ge(n.value),i=k.params.type;i&&T.push({name:"type",op:"",value:i});const F=d(z(T)),{deleteItems:N}=E(le,()=>{I()},u);g("delete"),H(u);const{loading:G,refetch:I}=ie({handle:(s,a)=>{a?re(g(a),"error"):s&&(u.value=s.apps.map(b=>({...b,checked:!1})),v.value=s.appCount)},document:ce,variables:()=>({offset:(m.value-1)*h,limit:h,query:F.value}),appApi:!0});ue(m,s=>{i?$(c,`/apps/${i}?page=${s}&q=${y(n.value)}`):$(c,`/apps?page=${s}&q=${y(n.value)}`)});function V(){const s=[];_.text&&s.push({name:"text",op:"",value:_.text}),n.value=z(s),C()}function C(){i?$(c,`/apps/${i}?q=${y(n.value)}`):$(c,`/apps?q=${y(n.value)}`)}return(s,a)=>{const b=be,R=J,U=Se,Z=W,P=O;return r(),p(B,null,[e("div",Ae,[f(b,{current:()=>`${s.$t("page_title.apps")} (${v.value})`},null,8,["current"]),e("div",Be,[f(R,{modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=t=>n.value=t),search:C},{filters:de(()=>[e("div",De,[e("label",Qe,o(s.$t("keywords")),1),e("div",xe,[pe(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=t=>_.text=t),class:"form-control",onKeyup:me(V,["enter"])},null,40,ze),[[_e,_.text]])])]),e("div",Ke,[e("button",{type:"button",class:"btn",onClick:q(V,["stop"])},o(s.$t("search")),9,Le)])]),_:1},8,["modelValue"])])]),e("table",Me,[e("thead",null,[e("tr",null,[e("th",null,o(s.$t("name")),1),e("th",null,o(s.$t("version")),1),e("th",null,o(s.$t("size")),1),e("th",null,o(s.$t("type")),1),e("th",null,o(s.$t("installed_at")),1),e("th",null,o(s.$t("updated_at")),1)])]),e("tbody",null,[(r(!0),p(B,null,he(u.value,t=>(r(),p("tr",{key:t.id,class:ve({checked:t.checked}),onClick:q(j=>t.checked=!t.checked,["stop"])},[e("td",null,[e("strong",null,[fe(o(t.name)+" ",1),f(U,{class:"bi bi-btn",onClick:q(j=>l(M)(t.path,`${t.name.replace(" ","")}-${t.id}.apk`),["stop"])},null,8,["onClick"])]),Ne,f(Z,{id:t.id,raw:t},null,8,["id","raw"])]),e("td",null,o(t.version),1),e("td",null,o(l($e)(t.size)),1),e("td",Ge,o(s.$t("app_type."+t.type)),1),e("td",{class:"nowrap",title:l(D)(t.installedAt)},o(l(Q)(t.installedAt)),9,Ie),e("td",{class:"nowrap",title:l(D)(t.updatedAt)},o(l(Q)(t.updatedAt)),9,Re)],10,Fe))),128))]),u.value.length?x("",!0):(r(),p("tfoot",Ue,[e("tr",null,[e("td",Ze,[e("div",Pe,o(s.$t(l(qe)(l(G)))),1)])])]))]),v.value>h?(r(),ye(P,{key:0,modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=t=>m.value=t),total:v.value,limit:h},null,8,["modelValue","total"])):x("",!0)],64)}}});export{st as default};
